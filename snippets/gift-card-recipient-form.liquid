<accordion-toggle>
    <div class="accordion-toggle customer body-font{% if settings.uppercase_body %} uppercase{% endif %}">
        {%- assign gift_card_recipient_control_flag = 'properties[__shopify_send_gift_card_to_recipient]' -%}
        <script src="{{ 'recipient-form.js' | asset_url }}" defer="defer"></script>
        <recipient-form
        class="recipient-form"
        data-section-id="{{ section.id }}"
        data-product-variant-id="{{ product.selected_or_first_available_variant.id }}"
        >
            <label class="accordion__summary recipient-checkbox flex--row" for="Recipient-Checkbox-{{ section.id }}">
                <input
                    id="Recipient-Checkbox-{{ section.id }}"
                    type="checkbox"
                    name="{{ gift_card_recipient_control_flag }}"
                    unchecked
                >
                <span>{{ 'recipient.form.checkbox' | t }}</span>
            </label>
            <div
              class="product-form__recipient-error-message-wrapper"
              role="alert"
              {% unless form.errors %} hidden{% endunless %}>
              <h2 class="form__message visually-hidden" tabindex="-1" autofocus>
                <span class="error-message">{{ 'templates.contact.form.error_heading' | t }}</span>
              </h2>
              <ul class="visually-hidden">
              {%- if form.errors -%}
                  {%- for field in form.errors -%}
                  <li>
                      {%- if field == 'form' -%}
                      {{ form.errors.messages[field] }}
                      {%- else -%}
                      <a href="#Recipient-{{ field }}-{{ section.id }}">
                          {{ form.errors.translated_fields[field] | capitalize }}
                          {{ form.errors.messages[field] }}
                      </a>
                      {%- endif -%}
                  </li>
                  {%- endfor -%}
              {%- endif -%}
              </ul>
          </div>
          <p
            id="Recipient-fields-live-region-{{ section.id }}"
            class="visually-hidden"
            role="status"
          ></p>
          <div class="accordion__panel recipient-fields">
              <div class="recipient-fields__field">
                <div class="field flex--column">
                    <label class="field__label caption-font{% if settings.uppercase_caption %} uppercase{% else %} none-uppercase{% endif %}" for="Recipient-email-{{ section.id }}">
                        <span class="recipient-email-label required">{{ 'recipient.form.email_label' | t }}</span>
                    </label>
                    <input
                    class="field__input input input--text"
                    id="Recipient-email-{{ section.id }}"
                    type="email"
                    dir="ltr"
                    name="properties[Recipient email]"
                    value="{{ form.email }}"
                    {% if form.errors contains 'email' %}
                        aria-invalid="true"
                        aria-describedby="RecipientForm-email-error-{{ section.id }}"
                    {% endif %}
                    >
                </div>
                <div id="RecipientForm-email-error-{{ section.id }}"
                    class="form__message{% unless form.errors contains 'email' %} hidden{% endunless %}">
                    <span class="error-message error-color">
                    {%- if form.errors contains 'email' -%}
                        {{ form.errors.translated_fields.email | capitalize }}
                        {{ form.errors.messages.email }}
                    {%- endif -%}
                    </span>
                </div>
              </div>
              <div class="recipient-fields__field field">
                <div class="field flex--column">
                    <label class="field__label caption-font{% if settings.uppercase_caption %} uppercase{% else %} none-uppercase{% endif %}" for="Recipient-name-{{ section.id }}">
                        {{- 'recipient.form.name_label' | t -}}
                    </label>
                    <input
                    class="field__input input input--text"
                    autocomplete="name"
                    type="text"
                    id="Recipient-name-{{ section.id }}"
                    name="properties[Recipient name]"
                    value="{{ form.name }}"
                    {% if form.errors contains 'name' %}
                        aria-invalid="true"
                        aria-describedby="RecipientForm-name-error-{{ section.id }}"
                    {% endif %}
                    >
                </div>
                <div id="RecipientForm-name-error-{{ section.id }}"
                    class="form__message{% unless form.errors contains 'name' %} hidden{% endunless %}">
                    <span class="error-message error-color">
                    {%- if form.errors contains 'name' -%}
                        {{ form.errors.translated_fields.name | capitalize }}
                        {{ form.errors.messages.name }}
                    {%- endif -%}
                    </span>
                </div>
              </div>
      
              <div class="recipient-fields__field field">
                {%- assign max_chars_message = 200 -%}
                {%- assign max_chars_message_rendered = 'recipient.form.max_characters' | t: max_chars: max_chars_message -%}
                {%- assign message_label_rendered = 'recipient.form.message_label' | t -%}
                <div class="field flex--column">
                    <label class="form__label field__label caption-font{% if settings.uppercase_caption %} uppercase{% else %} none-uppercase{% endif %}" for="Recipient-message-{{ section.id }}">
                        {{ message_label_rendered }}
                    </label>
                    <textarea
                    rows="5"
                    id="Recipient-message-{{ section.id }}"
                    class="textarea input"
                    name="properties[Message]"
                    maxlength="{{ max_chars_message }}"
                    aria-label="{{ message_label_rendered }} {{ max_chars_message_rendered }}"
                    {% if form.errors contains 'message' %}
                        aria-invalid="true"
                        aria-describedby="RecipientForm-message-error-{{ section.id }}"
                    {% endif %}
                    >{{ form.message }}</textarea>
                </div>
                <div id="RecipientForm-message-error-{{ section.id }}"
                    class="form__message{% unless form.errors contains 'message' %} hidden{% endunless %}">
                    <span class="error-message error-color">
                    {%- if form.errors contains 'message' -%}
                        {{ form.errors.translated_fields.message | capitalize }}
                        {{ form.errors.messages.message }}
                    {%- endif -%}
                    </span>
                </div>
              </div>

              <div class="recipient-fields__field field">
                <div class="field flex--column">
                    <label class="field__label caption-font{% if settings.uppercase_caption %} uppercase{% else %} none-uppercase{% endif %}" for="Recipient-send-on-{{ section.id }}">
                        {{- 'recipient.form.send_on_label' | t -}}
                    </label>
                    <div class="input-container">
                    <input
                    class="field__input field__input--date input input--text"
                    autocomplete="send_on"
                    type="date"
                    id="Recipient-send-on-{{ section.id }}"
                    name="properties[Send on]"
                    pattern="\d{4}-\d{2}-\d{2}"
                    value="{{ form.send_on }}"
                    {% if form.errors contains 'send_on' %}
                        aria-invalid="true"
                        aria-describedby="RecipientForm-send_on-error-{{ section.id }}"
                    {% endif %}
                    >
                    </div>
                </div>
                <div id="RecipientForm-send_on-error-{{ section.id }}"
                    class="form__message{% unless form.errors contains 'send_on' %} hidden{% endunless %}">
                    <span class="error-message error-color">
                    {%- if form.errors contains 'send_on' -%}
                        {{ form.errors.messages.send_on }}
                    {%- endif -%}
                    </span>
                </div>
              </div>
          </div>
            <input
              type="hidden"
              name="{{ gift_card_recipient_control_flag }}"
              value="if_present"
              id="Recipient-Control-{{ section.id }}"
            >
            <input
            type="hidden"
            name="properties[__shopify_offset]"
            value=""
            id="Recipient-timezone-offset-{{ section.id }}"
            disabled
            >
        </recipient-form>
    </div>
</accordion-toggle>